var AvrilThemeJs;(function($,avrilConfig){'use strict';AvrilThemeJs={eventID:'AvrilThemeJs',$document:$(document),$window:$(window),$body:$('body'),classes:{toggled:'toggled',isOverlay:'overlay-enabled',headerMenuActive:'header-menu-active',headerSearchActive:'header-search-active'},init:function(){this.$document.on('ready',this.documentReadyRender.bind(this));this.$document.on('ready',this.processAutoheight.bind(this));this.$document.on('ready',this.mobileMenuClone.bind(this));this.$window.on('ready',this.documentReadyRender.bind(this));},documentReadyRender:function(){this.$document.on('click.'+this.eventID,'.menu-toggle',this.menuToggleHandler.bind(this)).on('click.'+this.eventID,'.header-close-menu',this.menuToggleHandler.bind(this)).on('click.'+this.eventID,this.hideHeaderMobilePopup.bind(this)).on('click.'+this.eventID,'.mobile-toggler',this.verticalMobileSubMenuLinkHandle.bind(this)).on('click.'+this.eventID,'.header-close-menu',this.resetVerticalMobileMenu.bind(this)).on('hideHeaderMobilePopup.'+this.eventID,this.resetVerticalMobileMenu.bind(this)).on('resize.'+this.eventID,this.processAutoheight.bind(this)).on('click.'+this.eventID,'.header-search-toggle',this.searchToggleHandler.bind(this)).on('click.'+this.eventID,'.header-search-close',this.searchToggleHandler.bind(this)).on('click.'+this.eventID,'.scrollup',this.scrollUpClick.bind(this));this.$window.on('scroll.'+this.eventID,this.scrollToSticky.bind(this)).on('scroll.'+this.eventID,this.scrollUp.bind(this)).on('load.'+this.eventID,this.mobileMenuRight.bind(this)).on('load.'+this.eventID,this.menuFocusAccessibility.bind(this)).on('load.'+this.eventID,this.customQuery.bind(this)).on('load.'+this.customID,this.aboveHeaderMobile.bind(this)).on('resize.'+this.eventID,this.processAutoheight.bind(this));},scrollUp:function(event){var self=this,$scrollup=$('.scrollup');if(self.$window.scrollTop()>100){$scrollup.addClass('is-active');}
else{$scrollup.removeClass('is-active');}},scrollUpClick:function(event){$("html, body").animate({scrollTop:0},600);return false;},scrollToSticky:function(event){var self=this,$stickyNav=$('.sticky-nav');if(self.$window.scrollTop()>=220){$stickyNav.addClass('sticky-menu');}
else{$stickyNav.removeClass('sticky-menu');}},processAutoheight:function(event){var self=this;var $naviWrap=$('.navigator-wrapper');var $naviWrapAll=$('.navigator-wrapper > .theme-mobile-nav');var $naviWrapAllDesk=$('.navigator-wrapper > .nav-area *:not(.logo):not(.search-button *):not(.cart-wrapper *):not(.dropdown-menu)');var maxHeight=0;if($('body').find('div').hasClass("sticky-nav")){if($('div.theme-mobile-nav').css('display')=='block'){$naviWrapAll.each(function(){var height=$(this).outerHeight(true);if(height>maxHeight){maxHeight=height;}});$naviWrap.css('min-height',maxHeight);}
else{$naviWrapAllDesk.each(function(){var height=$(this).outerHeight(true);if(height>maxHeight){maxHeight=height;}});$naviWrap.css('min-height',maxHeight);}}},mobileMenuRight:function(event){$(".header-wrap-right").clone().appendTo(".mobile-menu-right");},mobileMenuClone:function(event){$(".menubar .menu-wrap").clone().appendTo(".mobile-menu");},aboveHeaderAccessibility:function(){var links,i,len,aboveItem=document.querySelector('.mobi-head-top'),aboveToggle=document.querySelector('.header-above-toggle');let focusableElements='button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])';let firstFocusableElement=aboveToggle;let focusableContent=aboveItem.querySelectorAll(focusableElements);let lastFocusableElement=focusableContent[focusableContent.length-1];if(!aboveItem){return false;}
links=aboveItem.getElementsByTagName('a');for(i=0,len=links.length;i<len;i++){links[i].addEventListener('focus',toggleFocus,true);links[i].addEventListener('blur',toggleFocus,true);}
function toggleFocus(){var self=this;while(-1===self.className.indexOf('mobi-head-top')){if('li'===self.tagName.toLowerCase()){if(-1!==self.className.indexOf('focus')){self.className=self.className.replace(' focus','');}else{self.className+=' focus';}}
self=self.parentElement;}}
document.addEventListener('keydown',function(e){let isTabPressed=e.key==='Tab'||e.keyCode===9;if(!isTabPressed){return;}
if(e.shiftKey){if(document.activeElement===firstFocusableElement){lastFocusableElement.focus();e.preventDefault();}}else{if(document.activeElement===lastFocusableElement){firstFocusableElement.focus();e.preventDefault();}}});},aboveHeaderMobile:function(){var self=this,$mob_h_top=$(".mobi-head-top"),$headerWidget=$(".header-widget"),$collapsed=$('.header-above-toggle');if(!$headerWidget.children().length>0){$headerWidget.hide();$collapsed.hide();}else{$collapsed.show();$headerWidget.clone().appendTo(".mobi-head-top");$collapsed.on('click',function(e){$mob_h_top.toggleClass("active");$collapsed.toggleClass("active");e.preventDefault();});}
self.aboveHeaderAccessibility();},menuFocusAccessibility:function(event){$('.menubar, .widget_nav_menu').find('a').on('focus blur',function(){$(this).parents('ul, li').toggleClass('focus');});},menuToggleHandler:function(event){var self=this,$toggle=$('.menu-toggle');self.$body.toggleClass(self.classes.headerMenuActive);self.$body.toggleClass(self.classes.isOverlay);$toggle.toggleClass(self.classes.toggled);if(self.$body.hasClass(self.classes.headerMenuActive)){$('.header-close-menu').focus();}else{$toggle.focus();}
self.menuAccessibility();},hideHeaderMobilePopup:function(event){var self=this,$toggle=$('.menu-toggle'),$mobileMenuBar=$('.mobile-menu');if($(event.target).closest($toggle).length||$(event.target).closest($mobileMenuBar).length){return;}
if(!self.$body.hasClass(self.classes.headerMenuActive)){return;}
self.$body.removeClass(self.classes.headerMenuActive);self.$body.removeClass(self.classes.isOverlay);$toggle.removeClass(self.classes.toggled);self.$document.trigger('hideHeaderMobilePopup.'+self.eventID);event.stopPropagation();},verticalMobileSubMenuLinkHandle:function(event){event.preventDefault();var self=this,$target=$(event.currentTarget),$menu=$target.closest('.mobile-menu .menu-wrap'),deep=$target.parents('.dropdown-menu').length,direction=self.isRTL?1:-1,translate=direction*deep*100;setTimeout(function(){$target.parent().toggleClass("current");$target.next().slideToggle();},250);},resetVerticalMobileMenu:function(event){var self=this,$menu=$('.mobile-menu .menu-wrap'),$menuItems=$('.mobile-menu  .menu-item'),$deep=$('.mobile-menu .dropdown-menu');setTimeout(function(){$menuItems.removeClass("current");$deep.hide();},250);},menuAccessibility:function(){var links,i,len,menu=document.querySelector('.mobile-menu'),iconToggle=document.querySelector('.header-close-menu');let focusableElements='button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])';let firstFocusableElement=iconToggle;let focusableContent=menu.querySelectorAll(focusableElements);let lastFocusableElement=focusableContent[focusableContent.length-1];if(!menu){return false;}
links=menu.getElementsByTagName('a');for(i=0,len=links.length;i<len;i++){links[i].addEventListener('focus',toggleFocus,true);links[i].addEventListener('blur',toggleFocus,true);}
function toggleFocus(){var self=this;while(-1===self.className.indexOf('mobile-menu')){if('li'===self.tagName.toLowerCase()){if(-1!==self.className.indexOf('focus')){self.className=self.className.replace(' focus','');}else{self.className+=' focus';}}
self=self.parentElement;}}
document.addEventListener('keydown',function(e){let isTabPressed=e.key==='Tab'||e.keyCode===9;if(!isTabPressed){return;}
if(e.shiftKey){if(document.activeElement===firstFocusableElement){lastFocusableElement.focus();e.preventDefault();}}else{if(document.activeElement===lastFocusableElement){firstFocusableElement.focus();e.preventDefault();}}});},searchToggleHandler:function(event){var self=this,$toggle=$('.header-search-toggle'),$field=$('.header-search-field');self.$body.toggleClass(self.classes.headerSearchActive);self.$body.toggleClass(self.classes.isOverlay);if(self.$body.hasClass(self.classes.headerSearchActive)){$field.focus();}else{$toggle.focus();}
self.searchPopupAccessibility();},searchPopupAccessibility:function(){var links,i,len,searchItem=document.querySelector('.header-search-popup'),fieldToggle=document.querySelector('.header-search-field');let focusableElements='button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])';let firstFocusableElement=fieldToggle;let focusableContent=searchItem.querySelectorAll(focusableElements);let lastFocusableElement=focusableContent[focusableContent.length-1];if(!searchItem){return false;}
links=searchItem.getElementsByTagName('button');for(i=0,len=links.length;i<len;i++){links[i].addEventListener('focus',toggleFocus,true);links[i].addEventListener('blur',toggleFocus,true);}
function toggleFocus(){var self=this;while(-1===self.className.indexOf('header-search-popup')){if('input'===self.tagName.toLowerCase()){if(-1!==self.className.indexOf('focus')){self.className=self.className.replace('focus','');}else{self.className+=' focus';}}
self=self.parentElement;}}
document.addEventListener('keydown',function(e){let isTabPressed=e.key==='Tab'||e.keyCode===9;if(!isTabPressed){return;}
if(e.shiftKey){if(document.activeElement===firstFocusableElement){lastFocusableElement.focus();e.preventDefault();}}else{if(document.activeElement===lastFocusableElement){firstFocusableElement.focus();e.preventDefault();}}});},customQuery:function(){if($(".service-section-hover").length>0){$(".service-section-hover").each(function(){if($(window).width()<991){return;}
$(this).find(".service-row").append('<div class="indicator"></div>');var leftPos=$(this).find(".service-row [class*='av-column-']").eq(1).position().left,column=$(this).find(".service-row [class*='av-column-']"),indicator=".indicator";var topPos=$(this).find(".service-row [class*='av-column-']").eq(1).position().top,column=$(this).find(".service-row [class*='av-column-']"),indicator=".indicator";column.siblings(indicator).css("width",column.outerWidth());column.siblings(indicator).css("height",$('.service-item').innerHeight());column.siblings(indicator).css("left",leftPos);column.siblings(indicator).css("top",topPos);column.on("mouseenter mouseleave",function(event){if(event.type==="mouseenter"){$(this).siblings(indicator).css({left:$(this).position().left,top:$(this).position().top});}
if(event.type==="mouseleave"){$(this).siblings(indicator).css({left:leftPos,top:topPos});}});});}
var animationDelay=2500;initHeadline();function initHeadline(){animateHeadline($('.av-heading'));}
function singleLetters($words){$words.each(function(){var word=$(this),letters=word.text().split(''),selected=word.hasClass('is-show');var newLetters=letters.join('');word.html(newLetters).css('opacity',1);});}
function animateHeadline($headlines){var duration=animationDelay;$headlines.each(function(){var headline=$(this);setTimeout(function(){hideWord(headline.find('.is-show').eq(0))},duration);});}
function hideWord($word){var nextWord=takeNext($word);switchWord($word,nextWord);setTimeout(function(){hideWord(nextWord)},animationDelay);}
function hideLetter($letter,$word,$bool,$duration){$letter.removeClass('in').addClass('out');if(!$letter.is(':last-child')){setTimeout(function(){hideLetter($letter.next(),$word,$bool,$duration);},$duration);}else if($bool){setTimeout(function(){hideWord(takeNext($word))},animationDelay);}
if($letter.is(':last-child')&&$('html').hasClass('no-csstransitions')){var nextWord=takeNext($word);switchWord($word,nextWord);}}
function takeNext($word){return(!$word.is(':last-child'))?$word.next():$word.parent().children().eq(0);}
function takePrev($word){return(!$word.is(':first-child'))?$word.prev():$word.parent().children().last();}
function switchWord($oldWord,$newWord){$oldWord.removeClass('is-show').addClass('is-hide');$newWord.removeClass('is-hide').addClass('is-show');}
document.querySelectorAll('.av-btn:not(.av-search-submit)').forEach(button=>button.innerHTML='<div><span>'+button.textContent.trim().split('').join('</span><span>')+'</span></div>');}};AvrilThemeJs.init();}(jQuery,window.avrilConfig));